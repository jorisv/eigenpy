[build-dependencies]
ccache = ">=4.9.1,<4.10"
cmake = ">=3.10"
cxx-compiler = "1.7.0"
ninja = "1.11.*"
pkg-config = ">=0.29.2,<0.30"
pre-commit = ">=3.6.2,<3.7"

[dependencies]
boost = ">=1.80.0,<1.85"
eigen = ">=3.3.0,<3.5"
numpy = ">=1.22.0,<1.27"
python = ">=3.8.0,<3.13"
scipy = ">=1.10.0,<1.13"

[project]
channels = ["conda-forge"]
description = "Bindings between Numpy and Eigen using Boost.Python"
license = "BSD-2-Clause"
license-file = "LICENSE"
name = "eigenpy"
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]
version = "3.4.0"

[tasks]
build = {cmd = "cmake --build build --target all", depends_on = [
  "prepare"
]}
clean = {cmd = "rm -rf build"}
lint = "pre-commit run --all"
prepare = """cmake -G 'Ninja'
                   -B build
                   -S .
                   -DCMAKE_CXX_COMPILER_LAUNCHER=ccache
                   -DCMAKE_BUILD_TYPE=Release
                   -DGENERATE_PYTHON_STUBS=ON"""
test = {cmd = "ctest --test-dir build --output-on-failure ", depends_on = ["build"]}
