[project]
name = "eigenpy"
version = "3.4.0"
description = "Bindings between Numpy and Eigen using Boost.Python"
channels = ["conda-forge"]
platforms = ["win-64", "linux-64", "osx-64", "osx-arm64"]
license = "BSD-2-Clause"
license-file = "LICENSE"

[tasks]
clean = { cmd = "rm -rf build" }
prepare = """cmake -G 'Ninja'
                   -B build
                   -S .
                   -DCMAKE_CXX_COMPILER_LAUNCHER=ccache
                   -DCMAKE_BUILD_TYPE=Release
                   -DGENERATE_PYTHON_STUBS=ON"""
build = { cmd = "cmake --build build --target all", depends_on = [
    "prepare",
] }
test = {cmd = "ctest --test-dir build --output-on-failure ", depends_on = ["build"] }
lint = "pre-commit run --all"

[dependencies]
eigen = ">=3.3.0,<3.5"
boost = ">=1.80.0,<1.85"
numpy = ">=1.22.0,<1.27"
scipy = ">=1.10.0,<1.13"
python = ">=3.8.0,<3.13"

[build-dependencies]
cmake = ">=3.10"
cxx-compiler = "1.7.0"
ninja = "1.11.*"
ccache = ">=4.9.1,<4.10"
pkg-config = ">=0.29.2,<0.30"
pre-commit = ">=3.6.2,<3.7"
